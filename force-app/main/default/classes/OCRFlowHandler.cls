public with sharing class OCRFlowHandler {
    @InvocableMethod(label='Execute OCR' description='Runs OCR on the Business Certification Image')
    public static List<String> executeOCR(List<Id> leadIds) { // ğŸ”¹ List<String> ë°˜í™˜ìœ¼ë¡œ ë³€ê²½
        List<String> extractedTexts = new List<String>();

        for (Id leadId : leadIds) {
            Lead lead = [SELECT Id, Business_Certification_Image__c FROM Lead WHERE Id = :leadId LIMIT 1];

            if (lead.Business_Certification_Image__c != null) {
                String extractedText = GoogleCloudVision.extractFilteredText(lead.Business_Certification_Image__c);

                // âœ… OCR ê²°ê³¼ë¥¼ ë¦¬ë“œì— ì €ì¥
                lead.Extracted_text__c = extractedText;
                update lead;

                extractedTexts.add(extractedText);
            }
        }

        return extractedTexts; // ğŸ”¹ Flowì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë„ë¡ ë°˜í™˜ íƒ€ì…ì„ List<String>ìœ¼ë¡œ ë³€ê²½
    }
}